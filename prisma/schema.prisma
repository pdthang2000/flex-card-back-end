generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Card {
  id              String            @id @default(auto()) @map("_id") @db.ObjectId
  front           String?
  back            String?
  setCardJunction SetCardJunction[]
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt

  @@index([front, back])
}

model Set {
  id              String            @id @default(auto()) @map("_id") @db.ObjectId
  title           String
  description     String?
  cardCount       Int
  setCardJunction SetCardJunction[]
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt

  @@index([title])
}

model SetCardJunction {
  id              String   @id @default(auto()) @map("_id") @db.ObjectId
  cardId          String   @map("card_id")
  setId           String   @map("set_id")
  orderId         Int
  card            Card     @relation(fields: [cardId], references: [id])
  set             Set      @relation(fields: [setId], references: [id])
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([cardId, setId])
}
// model Tag {
//   id    String   @id @default(auto()) @map("_id") @db.ObjectId
//   name  String   @unique
// }
// model TagCardJunction {
//   id     String @id @default(auto()) @map("_id") @db.ObjectId
//   cardId String @map("card_id")
//   tagId  String @map("tag_id")
//   card   Card   @relation(fields: [cardId], references: [id])
//   tag    Tag    @relation(fields: [tagId], references: [id])
// }